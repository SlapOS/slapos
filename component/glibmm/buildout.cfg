[buildout]
extends =
  ../gettext/buildout.cfg
  ../glib/buildout.cfg
  ../libsigc/buildout.cfg
  ../meson/buildout.cfg
  ../ninja/buildout.cfg
  ../perl/buildout.cfg
  ../python3/buildout.cfg
  ../pkgconfig/buildout.cfg
  ../xz-utils/buildout.cfg
parts =
  glibmm

[glibmm]
recipe = slapos.recipe.cmmi
shared = true
# 2.66 is the latest for gtk 3
url = https://download.gnome.org/sources/glibmm/2.66/glibmm-2.66.8.tar.xz
md5sum = 4cdcd69c3af84e59dfd745a1b1cb9851
pkg_config_depends = ${glib:location}/lib/pkgconfig:${glib:pkg_config_depends}:${libsigc:location}/lib/pkgconfig
configure-command = ${meson:location}/bin/meson setup builddir --wrap-mode=nodownload --libdir=lib -Dprefix=@@LOCATION@@
make-binary = ninja -C builddir
environment =
  PATH=${python3:location}/bin:${perl:location}/bin:${pkgconfig:location}/bin:${xz-utils:location}/bin:${glib:location}/bin:${ninja:location}/bin:%(PATH)s
  PKG_CONFIG_PATH=${:pkg_config_depends}
  CPPFLAGS=-I${gettext:location}/include
  LDFLAGS=-L${gettext:location}/lib -Wl,-rpath=${gettext:location}/lib -Wl,-rpath=${glib:location}/lib -Wl,-rpath=${libsigc:location}/lib -Wl,-rpath=@@LOCATION@@/lib
