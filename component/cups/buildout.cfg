[buildout]
parts =
  cups

extends =
  ../perl/buildout.cfg
  ../zlib/buildout.cfg

# for now we build and install library and header files only.
[cups]
recipe = slapos.recipe.cmmi
shared = true
url = https://github.com/OpenPrinting/cups/releases/download/v2.4.16/cups-2.4.16-source.tar.gz
md5sum = 53cccb5d69eaed7e4c6fe66fa12b11c4
location = @@LOCATION@@
configure-options =
  --disable-static
  --disable-dbus
  --disable-gssapi
  --without-tls
  --disable-pam
  --disable-avahi
  --disable-dnssd
  --disable-launchd
  --disable-browsing
  --disable-default-shared
  --disable-raw-printing
  --disable-webif
  --libdir=${:location}/lib
make-options =
  libs
make-targets =
  install-headers
  install-libs
environment =
  PATH=${perl:location}/bin:%(PATH)s
  CPPFLAGS=-I${zlib:location}/include
  DSOFLAGS=-L${zlib:location}/lib -Wl,-rpath=${zlib:location}/lib
