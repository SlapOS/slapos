[buildout]
parts = cython

[cython]
recipe = zc.recipe.egg
egg = cython
scripts = cython cythonize

[cython-bin]
recipe = slapos.recipe.build
shared = true
install =
  import pathlib
  import shutil
  buildout_bin_directory = (pathlib.Path(
    self.buildout['buildout']['directory']) / 'bin')
  bin_directory = (pathlib.Path(location) / 'bin')
  bin_directory.mkdir(parents=True, exist_ok=True)
  for i in "${cython:scripts}".split():
    shutil.copy(
      (buildout_bin_directory / i),
      (bin_directory / i),
   )
