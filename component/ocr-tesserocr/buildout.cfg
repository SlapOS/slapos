[buildout]
extends =
  ../ocr-tesseract/buildout.cfg
  ../ocr-leptonica/buildout.cfg
  ../cython/buildout.cfg

parts =
  tesserocr-patch
  ocr-tesserocr

[tesserocr-repository]
recipe = slapos.recipe.build:gitclone
repository = https://github.com/sirfz/tesserocr
git-executable = ${git:location}/bin/git
branch = tesseract4
revision = 61b85da

[tesserocr-env]
PATH=${pkg-config:location}/bin:${ocr-tesseract:location}/bin:%(PATH)s
PKG_CONFIG_PATH=${ocr-tesseract:location}/lib/pkgconfig:${ocr-leptonica:location}/lib/pkgconfig
CPPFLAGS = -I${ocr-leptonica:location}/include -I${ocr-tesseract:location}/include
LDFLAGS =-L${ocr-leptonica:location}/lib -Wl,-rpath=${ocr-leptonica:location}/lib -L${ocr-tesseract:location}/lib -Wl,-rpath=${ocr-tesseract:location}/lib

[ocr-tesserocr]
recipe = zc.recipe.egg:develop
setup = ${tesserocr-repository:location}
egg = tesserocr
setup-eggs =
  ${cython:egg}
environment = tesserocr-env