[buildout]

parts =
  java

[java]
<= java-re

[java-re]
<= java-re-7

[java-common]
recipe = slapos.recipe.build:download-unpacked
shared = true
url = http://javadl.sun.com/webapps/download/AutoDL?BundleId=${:bundle-id}

[java-re-7]
<= java-common
# http://java.com/en/download/manual_java7.jsp

[java-re-7:linux and platform.machine() == 'i686']
bundle-id = 97798
md5sum = 90a6b9e2a32d06c18a3f16b485f0d1ea

[java-re-7:linux and platform.machine() == 'x86_64']
bundle-id = 97800
md5sum = 7605134662f6c87131eca5745895fe84

[java-re-8]
<= java-common
# https://www.java.com/en/download/manual.jsp
# Update 161

[java-re-8:linux and platform.machine() == 'i686']
bundle-id = 230530_2f38c3b165be4555a1fa6e98c45e0808
md5sum = 90a6b9e2a32d06c18a3f16b485f0d1ea

[java-re-8:linux and platform.machine() == 'x86_64']
bundle-id = 230532_2f38c3b165be4555a1fa6e98c45e0808
md5sum = 4385bc121b085862be623f4a31e7e0b4

[java-re-8-output]
# Shared binary location to ease migration
recipe = plone.recipe.command
stop-on-error = true
update-command = ${:command}
command = ${coreutils-output:test} -x ${:keytool}
keytool = ${java-re-8:location}/bin/keytool
