[buildout]
extends =
  ../defaults.cfg
  ../mavsdk/buildout.cfg

parts = 
  mavsdk-wrapper

[mavsdk-wrapper-source]
recipe = slapos.recipe.build:gitclone
repository = https://gitlab+deploy-token-19:JJUs_Etxw-6rC45XY46g@lab.nexedi.com/jhuge/mavsdk_wrapper

[mavsdk-wrapper]
recipe = slapos.recipe.cmmi
configure-command = true
path = ${mavsdk-wrapper-source:location}/
location = ${buildout:parts-directory}/${:_buildout_section_name_}
lib-name = libmavsdk_wrapper.a
lib-path = ${mavsdk-wrapper-source:location}/lib/${:lib-name}
inc-dir = ${mavsdk-wrapper-source:location}/include
environment =
  MAVSDK_WRAPPER_INC = ${:inc-dir}
  MAVSDK_LIB = ${mavsdk:lib-path}
  MAVSDK_INC = ${mavsdk:inc-dir}
  CC=${gcc:prefix}/bin/gcc

