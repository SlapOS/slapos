[buildout]
extends =
  ../defaults.cfg
  ../mavsdk/buildout.cfg

parts = 
  mavsdk-wrapper

[gcc]
max_version = 0

[mavsdk-wrapper-source]
recipe = slapos.recipe.build:gitclone
repository = https://gitlab+deploy-token-19:JJUs_Etxw-6rC45XY46g@lab.nexedi.com/jhuge/mavsdk_wrapper

[mavsdk-wrapper]
recipe = slapos.recipe.cmmi
configure-command = true
path = ${mavsdk-wrapper-source:location}/
location = ${buildout:parts-directory}/${:_buildout_section_name_}
lib-name = libmavsdk_wrapper.a
lib-path = ${:location}/lib/${:lib-name}
inc-dir = ${:location}/include
environment =
  MAVSDK_LIB = ${:lib-name}
  CC=${gcc:prefix}/bin/gcc

