[buildout]
extends =
  ../defaults.cfg
  ../bash/buildout.cfg
  ../cmake/buildout.cfg

parts = 
  mavsdk-wrapper

[gcc]
max_version = 0

[mavsdk-wrapper-source]
recipe = slapos.recipe.build:gitclone
revision = v0.2
repository = https://lab.nexedi.com/jhuge/mavsdk_wrapper

[mavsdk-wrapper]
recipe = slapos.recipe.cmmi
configure-command = true
path = ${mavsdk-wrapper-source:location}/
location = ${buildout:parts-directory}/${:_buildout_section_name_}
lib-name = libmavsdk_wrapper.a
lib-path = ${mavsdk-wrapper-source:location}/lib/${:lib-name}
inc-dir = ${mavsdk-wrapper-source:location}/include
environment =
  CC=${gcc:prefix}/bin/gcc
  AR=${gcc:prefix}/bin/ar
  PATH=${bash:location}/bin:${cmake:location}/bin:%(PATH)s
