[buildout]
extends =
  ../libcap-ng/buildout.cfg
  ../lzo/buildout.cfg
  ../openssl/buildout.cfg
  ../flex/buildout.cfg
  ../xz-utils/buildout.cfg

parts =
  openvpn

[openvpn]
recipe = slapos.recipe.cmmi
url = https://build.openvpn.net/downloads/releases/openvpn-${:version}.tar.gz
version = 2.6.8
md5sum = 427fe070a4ab9fd78dc64195458dc361
configure-options =
  --disable-lz4
  --disable-dependency-tracking
  --disable-plugin-auth-pam
  --enable-iproute2
environment =
  PATH=${xz-utils:location}/bin:%(PATH)s
  LZO_LIBS=-L${lzo:location}/lib -llzo2
  LZO_CFLAGS=-I${lzo:location}/include
  LIBCAPNG_LIBS=-L${libcap-ng:location}/lib -lcap-ng
  LIBCAPNG_CFLAGS=-I${libcap-ng:location}/include
  OPENSSL_LIBS=-L${openssl:location}/lib -lcrypto -lssl
  OPENSSL_CFLAGS=-I${openssl:location}/include
  LDFLAGS =-Wl,-rpath=${lzo:location}/lib -Wl,-rpath=${flex:location}/lib -Wl,-rpath=${openssl:location}/lib
  CPPFLAGS=-I${lzo:location}/include -I${flex:location}/include
