[buildout]
extends =
  ../gmp/buildout.cfg
  ../m4/buildout.cfg
  ../openssl/buildout.cfg

[nettle]
recipe = slapos.recipe.cmmi
shared = true
url = https://ftpmirror.gnu.org/gnu/nettle/nettle-3.10.2.tar.gz
md5sum = b28bcbf6f045ff007940a9401673600d
configure-option =
  --disable-static
  --disable-assembler
  --disable-openssl
  --disable-documentation
environment =
  PATH=${m4:location}/bin:${patch:location}/bin:%(PATH)s
  CPPFLAGS=-I${gmp:location}/include -I${openssl:location}/include
  LDFLAGS=-L${gmp:location}/lib -Wl,-rpath=${gmp:location}/lib -Wl,-rpath=@@LOCATION@@/lib -L${openssl:location}/lib -Wl,-rpath=${openssl:location}/lib
post-install =
  cd %(location)s
  [ -d lib ] || ln -s lib64 lib
