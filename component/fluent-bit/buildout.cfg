[buildout]
extends =
  ../cmake/buildout.cfg
  ../bison/buildout.cfg
  ../flex/buildout.cfg
  
[fluent-bit]
recipe = slapos.recipe.cmmi
url = https://github.com/fluent/fluent-bit/archive/refs/tags/v1.9.7.tar.gz
shared = true
md5sum = be1428da9aaacc08b0892cd23720fc36
configure-command = 
  ${cmake:location}/bin/cmake
configure-options =
  -DCMAKE_INSTALL_PREFIX=@@LOCATION@@
  -DFLB_CONFIG_YAML=Off
environment =
  PATH=${bison:location}/bin:${flex:location}/bin:%(PATH)s
make-targets =

# Post-Install is needed, in order a shell command to be executed
# after the installation, in our case to copy the fluent-bit
# binary file from the source directory to the main directory.
post-install = cp @@LOCATION@@/.build/fluent-bit-1.9.7/bin/fluent-bit @@LOCATION@@
