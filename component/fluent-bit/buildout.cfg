[buildout]
extends =
  ../cmake/buildout.cfg
  ../bison/buildout.cfg
  ../flex/buildout.cfg
  
parts =
  fluent-bit

[fluent-bit-source]
recipe = slapos.recipe.build:download-unpacked
url = https://github.com/fluent/fluent-bit/archive/refs/tags/v1.9.7.tar.gz
shared = true
md5sum = be1428da9aaacc08b0892cd23720fc36

[fluent-bit]
recipe = slapos.recipe.cmmi
path = ${fluent-bit-source:location}
configure-command = 
  ${cmake:location}/bin/cmake
configure-options =
  -DCMAKE_INSTALL_PREFIX=@@LOCATION@@
  -DFLB_CONFIG_YAML=Off
environment =
  PATH=${bison:location}/bin:${flex:location}/bin:%(PATH)s
