[buildout]


parts =
  open62541


[open62541-source]
recipe  = slapos.recipe.build:gitclone
git-executable = ${git:location}/bin/git
repository = https://github.com/open62541/open62541.git
branch = v1.0
revision = ce5209d78d3821504d31b3bbdb03f53d6e3f93a7


[open62541]
recipe = slapos.recipe.cmmi
path = ${open62541-source:location}
location = ${buildout:parts-directory}/${:_buildout_section_name_}
configure-command = 
  rm -rf build && mkdir build && cd build && \
  ${cmake:location}/bin/cmake \
  -DCMAKE_INSTALL_PREFIX=${:location} \
  -DBUILD_SHARED_LIBS=ON \
  -DCMAKE_BUILD_TYPE=RelWithDebInfo \
  -DUA_ENABLE_AMALGAMATION=ON \
  -DUA_BUILD_SELFSIGNED_CERTIFICATE=ON \
  -DUA_NAMESPACE_ZERO=FULL ../
make-binary =
  cd build && make
environment =
  PATH=${cmake:location}/bin:%(PATH)s