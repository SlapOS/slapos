[buildout]
extends =
  ../../stack/slapos.cfg
  ../rust/buildout.cfg
  ../protobuf/buildout.cfg
  ../llvm/buildout.cfg

parts =
  qdrant

[qdrant]
<= protobuf-21.12
recipe = slapos.recipe.cmmi
shared = true
url = https://github.com/qdrant/qdrant/archive/refs/tags/v1.11.5.tar.gz
md5sum = c72147a13cf01615720697eac81265e9
configure-command = :
make-binary = cargo install --root=%(location)s --path . --locked
make-targets =
environment =
  PATH=${rustc:location}/bin:%(PATH)s
  LIBCLANG_PATH=${llvm:location}/lib
  LLVM_CONFIG_PATH=${llvm:location}/bin
  BINDGEN_EXTRA_CLANG_ARGS="-I${llvm:location}/lib/clang/19/include"
  PROTOC=${protobuf-21.12:location}/bin/protoc
