[buildout]
extends =
  ../open62541/buildout.cfg
  ../quickjs/buildout.cfg

parts = 
  open62541-qjs-wrapper

[open62541-qjs-wrapper]
recipe = slapos.recipe.cmmi
configure-command =
  cp ${:_profile_base_location_}/*.c ${:_profile_base_location_}/Makefile ${:location}
location = @@LOCATION@@
path = ${:location}
environment =
  C_INCLUDE_PATH=${open62541:location}/include:${quickjs:location}/include:$C_INCLUDE_PATH
  LDFLAGS=-L${open62541:location}/lib -Wl,-rpath=${open62541:location}/lib
