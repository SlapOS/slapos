[buildout]

extends = 
  ../patchelf/buildout.cfg
  ../zlib/buildout.cfg

parts = 
  java-jdk

[java-jdk-download]
recipe = slapos.recipe.build:download-unpacked
url = https://download.java.net/java/GA/jdk12.0.2/e482c34c86bd4bf8b56c0b35558996b9/10/GPL/openjdk-12.0.2_linux-x64_bin.tar.gz
md5sum = f5da6f4dec81bdd2a096184ec1d69216
strip-top-level-dir = true

[java-jdk]
recipe = plone.recipe.command
files = ${java-jdk-download:target} # well, we tried to use 'location' but it fails with new collision checks, so usual convention needs to be screwed unfortunately. 
command =
  for file in ${java-jdk-download:target}/bin/*
  do
	echo appending rpath to $file
	${patchelf:location}/bin/patchelf --set-rpath ${:rpath} $file
  done
rpath = ${zlib:location}/lib:${java-jdk-download:target}/lib
