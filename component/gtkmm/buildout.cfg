[buildout]
extends =
  ../bzip2/buildout.cfg
  ../freetype/buildout.cfg
  ../gettext/buildout.cfg
  ../glibmm/buildout.cfg
  ../gtk/buildout.cfg
  ../libsigc/buildout.cfg
  ../perl/buildout.cfg
  ../xorg/buildout.cfg
  ../xz-utils/buildout.cfg
  ../zlib/buildout.cfg

parts =
  gtkmm

[cairomm]
recipe = slapos.recipe.cmmi
shared = true
# 1.14.x are the latest for GTK 3
url = https://cairographics.org/releases/cairomm-1.14.5.tar.xz
md5sum = 0974ef291d491f22df287f588580677d
pkg_config_depends = ${cairo:location}/lib/pkgconfig:${cairo:pkg_config_depends}:${libsigc:location}/lib/pkgconfig
configure-command =
  meson setup builddir --wrap-mode=nodownload --libdir=lib -Dprefix="@@LOCATION@@" -Dbuild-documentation=false -Dmaintainer-mode=false
make-binary = ninja -C builddir
environment =
  PATH=${meson:location}/bin:${ninja:location}/bin:${freetype:location}/bin:${perl:location}/bin:${pkgconfig:location}/bin:${xz-utils:location}/bin:%(PATH)s
  PKG_CONFIG_PATH=${:pkg_config_depends}
  LDFLAGS=-Wl,-rpath=${libX11:location}/lib -Wl,-rpath=${libXext:location}/lib -Wl,-rpath=${libXrender:location}/lib -Wl,-rpath=${zlib:location}/lib -Wl,-rpath=${glib:location}/lib -Wl,-rpath=${libsigc:location}/lib -Wl,-rpath=${cairo:location}/lib

[pangomm]
recipe = slapos.recipe.cmmi
shared = true
# 2.46.x are the latest for GTK 3
url = https://download.gnome.org/sources/pangomm/2.46/pangomm-2.46.4.tar.xz
md5sum = 5947d35899db62813531d7ea8faee60c
pkg_config_depends = ${pango:location}/lib/pkgconfig:${pango:pkg_config_depends}:${glibmm:location}/lib/pkgconfig:${glibmm:pkg_config_depends}:${cairomm:location}/lib/pkgconfig:${cairomm:pkg_config_depends}
configure-command =
  meson setup builddir --wrap-mode=nodownload --libdir=lib -Dprefix="@@LOCATION@@" -Dbuild-documentation=false
make-binary = ninja -C builddir
environment =
  PATH=${glib:location}/bin:${freetype:location}/bin:${meson:location}/bin:${ninja:location}/bin:${perl:location}/bin:${pkgconfig:location}/bin:${xz-utils:location}/bin:%(PATH)s
  PKG_CONFIG_PATH=${:pkg_config_depends}
  LDFLAGS=-Wl,-rpath=${gettext:location}/lib -Wl,-rpath=${harfbuzz:location}/lib -Wl,-rpath=${glib:location}/lib -Wl,-rpath=${glibmm:location}/lib -Wl,-rpath=${pango:location}/lib -L${glibmm:location}/lib -Wl,-rpath=${libsigc:location}/lib -Wl,-rpath=${cairo:location}/lib -Wl,-rpath=${cairomm:location}/lib

[atkmm]
recipe = slapos.recipe.cmmi
shared = true
# 2.28.x are the latest for GTK 3
url = https://download.gnome.org/sources/atkmm/2.28/atkmm-2.28.4.tar.xz
md5sum = e0f7271990c89a6c9987f215ba47bfc5
pkg_config_depends = ${atk:location}/lib/pkgconfig:${glib:location}/lib/pkgconfig:${glib:pkg_config_depends}:${glibmm:location}/lib/pkgconfig:${libsigc:location}/lib/pkgconfig
configure-command =
  meson setup builddir --wrap-mode=nodownload --libdir=lib -Dprefix="@@LOCATION@@" -Dbuild-documentation=false
make-binary = ninja -C builddir
environment =
  PATH=${glib:location}/bin:${meson:location}/bin:${ninja:location}/bin:${perl:location}/bin:${pkgconfig:location}/bin:${xz-utils:location}/bin:%(PATH)s
  PKG_CONFIG_PATH=${:pkg_config_depends}
  LDFLAGS=-Wl,-rpath=${gettext:location}/lib -Wl,-rpath=${glib:location}/lib -Wl,-rpath=${atk:location}/lib -Wl,-rpath=${glibmm:location}/lib -L${glibmm:location}/lib -Wl,-rpath=${libsigc:location}/lib

[gtkmm]
recipe = slapos.recipe.cmmi
shared = true
# 3.24.x are the latest for GTK 3
url = https://download.gnome.org/sources/gtkmm/3.24/gtkmm-3.24.9.tar.xz
md5sum = 47871a7973e186c1189b2145b507de15
pkg_config_depends = ${pangomm:location}/lib/pkgconfig:${pangomm:pkg_config_depends}:${atkmm:location}/lib/pkgconfig:${atkmm:pkg_config_depends}:${gtk-3:location}/lib/pkgconfig:${gtk-3:pkg_config_depends}
configure-command =
  meson setup builddir --wrap-mode=nodownload --libdir=lib -Dprefix="@@LOCATION@@" -Dbuild-documentation=false -Dbuild-demos=false -Dbuild-tests=false
make-binary = ninja -C builddir
environment =
  PATH=${gdk-pixbuf:location}/bin:${glib:location}/bin:${gtk-3:location}/bin:${pango:location}/bin:${perl:location}/bin:${pkgconfig:location}/bin:${xz-utils:location}/bin:${meson:location}/bin:${ninja:location}/bin:%(PATH)s
  PKG_CONFIG_PATH=${:pkg_config_depends}
  LDFLAGS=-Wl,-rpath=${bzip2:location}/lib -Wl,-rpath=${gettext:location}/lib -Wl,-rpath=${zlib:location}/lib -Wl,-rpath=${harfbuzz:location}/lib -Wl,-rpath=${glib:location}/lib -Wl,-rpath=${atk:location}/lib -Wl,-rpath=${glibmm:location}/lib -Wl,-rpath=${gdk-pixbuf:location}/lib -L${glibmm:location}/lib -Wl,-rpath=${atkmm:location}/lib -Wl,-rpath=${cairomm:location}/lib -Wl,-rpath=${gtk-3:location}/lib -Wl,-rpath=${libsigc:location}/lib -Wl,-rpath=${pangomm:location}/lib -Wl,-rpath=@@LOCATION@@/lib
