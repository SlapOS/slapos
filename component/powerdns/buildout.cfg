[buildout]
extends =
  ../bison/buildout.cfg
  ../flex/buildout.cfg
  ../boost-lib/buildout.cfg
  ../libtool/buildout.cfg
  ../pkgconfig/buildout.cfg
  ../ragel/buildout.cfg
  ../zlib/buildout.cfg

parts =
  powerdns

[powerdns]
recipe = slapos.recipe.cmmi
url = https://downloads.powerdns.com/releases/pdns-3.4.9.tar.bz2
md5sum = 3b1754e70382affb03d685bbacf881d2
configure-options =
  --prefix=${buildout:parts-directory}/${:_buildout_section_name_}
  --with-boost=${boost-lib:location}
  --with-modules="geo"
  --with-dynmodules=""
  --without-lua
environment =
  PATH=${libtool:location}/bin:${pkgconfig:location}/bin:${bison:location}/bin:${flex:location}/bin:${ragel:location}/bin:%(PATH)s
  LDFLAGS=-L${boost-lib:location}/lib -Wl,-rpath=${boost-lib:location}/lib -L${zlib:location}/lib -Wl,-rpath -Wl,${zlib:location}/lib -lz
  CPPFLAGS=-I${boost-lib:location}/include
make-target =
  install
