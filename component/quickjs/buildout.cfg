[buildout]
extends =
  ../mavsdk-wrapper/buildout.cfg
  ../open62541/buildout.cfg
parts = quickjs

[quickjs]
recipe = slapos.recipe.cmmi
configure-command = true
url = https://bellard.org/quickjs/quickjs-2021-03-27.tar.xz
md5sum = 135182a626aa0c87a49aa2bf58fd39bf
location = ${buildout:parts-directory}/${:_buildout_section_name_}
environment =
  SLAPOS_GCC=${gcc:prefix}/bin/gcc
  MAVSDK_INC=${mavsdk-wrapper:location}/include
  MAVSDK_LIB=${mavsdk-wrapper:location}/lib/${mavsdk-wrapper:lib-name}
  QUICKJS_DIR=${:location}/
patch-options = -p1
patches =
  ${:_profile_base_location_}/quickjs-mavsdk.patch#e6d324d04dc94f240d63874caebac0d3
make-options = -j1
