#  faketime - report faked system time to programs without having to change the system-wide time

[buildout]
extends =
  ../coreutils/buildout.cfg
  ../patch/buildout.cfg
parts = faketime

[faketime]
recipe = slapos.recipe.cmmi
shared = true
url = https://github.com/wolfcw/libfaketime/archive/refs/tags/v0.9.12.tar.gz
md5sum = ad359ea78db3d28ba2520c34800306ba
configure-command = true
make-options =
  PREFIX=%(location)s FAKETIME_COMPILE_CFLAGS="-DFT_SEMAPHORE_BACKEND=FT_SYSV"
make-targets = test install
make-binary = ${coreutils:location}/bin/timeout 30m make
patch-binary = ${patch:location}/bin/patch
patch-options = -p1
patches = https://github.com/wolfcw/libfaketime/commit/6404d81f63ff2b899109338a71ef814c76b5d0ea.patch?full_index=1#1015d23a1bf4343c2c1d32a6ddc2633b
