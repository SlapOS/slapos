[buildout]
extends =
  ../openssl/buildout.cfg
  ../pkgconfig/buildout.cfg
  ../python-cffi/buildout.cfg

parts =
  python-cryptography

[python-cryptography]
recipe = zc.recipe.egg:custom
egg = cryptography
environment = python-cryptography-env
setup-eggs = ${python-cffi:egg}
# f08a7de651f9e6475c8c0a67d2a61ed8b669ddf6 [WIP] 3.0.0 support (#5250)
# 50ec692749b7e2e62685b443f5e629627b03987e remove unneeded binding (#6150)
# 77fb53c75e47f50e09b1b3be3a4d10c7e4e34dc2 3.0.0 deprecated func and it isn't useful to us in general (#6148)
cryptography-patches = ${:_profile_base_location_}/cryptography-3.3.2-openssl-3.0.patch#9b1ba07643945952b00fc57719555ea7
cryptography-patch-options = -p0
library-dirs =
  ${openssl:location}/lib/
rpath =
  ${openssl:location}/lib/

[python-cryptography-env]
PATH = ${pkgconfig:location}/bin:%(PATH)s
PKG_CONFIG_PATH = ${openssl:location}/lib/pkgconfig
LD_LIBRARY_PATH = ${openssl:location}/lib
CPATH = ${openssl:location}/include
