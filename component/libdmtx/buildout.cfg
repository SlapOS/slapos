# libdmtx - open source software for reading and writing Data Matrix barcodes.
# http://www.libdmtx.org/

[buildout]
extends =
  ../bzip2/buildout.cfg
  ../imagemagick/buildout.cfg
  ../jbigkit/buildout.cfg
  ../patch/buildout.cfg
  ../zlib/buildout.cfg
parts =
  libdmtx
  dmtx-utils

[libdmtx]
recipe = slapos.recipe.cmmi
shared = true
#url = http://prdownloads.sourceforge.net/libdmtx/libdmtx-0.7.4.tar.bz2
url = http://download.shacache.org/13066ecefb3da3746c6f1e872ae7493bb3902fb891ef6d96f65a90ca444107662fcad4a7fae3463ab2f6503f0962d248a5dcd754a6eb0b5c624ae68100b9c056
md5sum = d3a4c0becd92895eb606dbdb78b023e2
configure-options =
  --disable-static

[dmtx-utils]
recipe = slapos.recipe.cmmi
# url = http://prdownloads.sourceforge.net/libdmtx/dmtx-utils-0.7.4.tar.bz2
url = http://download.shacache.org/c86d0829b1d036f417bd9cd1dde3f7ccc68b0dc02c08ea5da340c3c290f75832269219e27eb8bb9a46d97cd29eb0c60824360bbd1783910111c2ab886787a759
md5sum = b132ab9fb1d289869469b8bb4959a08a
configure-options =
  --disable-static
patch-options = -p1
patches =
  ${:_profile_base_location_}/imagemagick-7.patch#e0ec31041be5a4f3551ab84696671110
environment =
  PATH=${patch:location}/bin:${pkgconfig:location}/bin:%(PATH)s
  PKG_CONFIG_PATH=${imagemagick:location}/lib/pkgconfig:${libdmtx:location}/lib/pkgconfig
  CPPFLAGS=-I${libdmtx:location}/include
  LDFLAGS=-Wl,-rpath=${jbigkit:location}/lib -Wl,-rpath=${bzip2:location}/lib -Wl,-rpath=${zlib:location}/lib
