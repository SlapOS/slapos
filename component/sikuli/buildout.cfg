[buildout]
extends =
  ../java/buildout.cfg
parts =
  sikuli

[java]
<= java-re-temurin-11

[sikuli-download]
recipe = slapos.recipe.build:download
url = https://launchpad.net/sikuli/sikulix/2.0.5/+download/sikulixide-2.0.5.jar
filename = sikulixide-2.0.5.jar
md5sum = 0795f1e0866ee5a7a84e4c89793ea78c

[sikuli]
recipe = slapos.recipe.template:jinja2
rendered = ${buildout:parts-directory}/${:_buildout_section_name_}/sikulix
mode = 750
template = inline:#!/bin/sh
  JAVA_HOME=${java:location}
  JRE_HOME=${java:location}
  PATH=${java:location}/bin:$PATH

  exec java -jar ${sikuli-download:location}/${sikuli-download:filename} "$@"
