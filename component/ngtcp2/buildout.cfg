[buildout]
extends =
  ../pkgconfig/buildout.cfg
  ../automake/buildout.cfg
  ../libtool/buildout.cfg
  ../pkgconfig/buildout.cfg

[ngtcp2]
recipe = slapos.recipe.cmmi
shared = true
url = https://github.com/ngtcp2/ngtcp2/archive/refs/tags/v0.12.1.tar.gz
md5sum = c826c4630689d2afb9300b97cc5e52a3
pre-configure =
  autoreconf -fisv -I ${libtool:location}/share/aclocal -I ${pkgconfig:location}/share/aclocal
  automake
  autoconf
configure-options =
  --enable-lib-only
environment =
  PATH=${autoconf:location}/bin:${automake:location}/bin:${libtool:location}/bin:${m4:location}/bin:${pkgconfig:location}/bin:%(PATH)s
  PKG_CONFIG_PATH=${openssl3-quictls:location}/lib/pkgconfig:${nghttp3:location}/lib/pkgconfig
  LDFLAGS=-Wl,-rpath=${openssl3-quictls:location}/lib -Wl,-rpath=${nghttp3:location}/lib
