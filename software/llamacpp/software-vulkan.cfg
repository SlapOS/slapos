[buildout]
extends = software.cfg
parts +=
  llama-build-vulkan

# add LLAMA_BLAS=1 and env if needed
[llama-build-vulkan]
recipe = slapos.recipe.cmmi
path = ${llama-source:location}
configure-command = ${cmake:location}/bin/cmake
configure-options =
  -B build -DGGML_VULKAN=1
make-binary =  ${cmake:location}/bin/cmake
make-targets =
  --build build --config Release
environment =
  CMAKE_INCLUDE_PATH=${curl:location}/include
  CMAKE_LIBRARY_PATH=${curl:location}/lib
  CC=gcc
  CXX=g++

