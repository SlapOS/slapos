{%- set ors_defaults = {
  "bandwidth": "20 MHz",
  "n_antenna_dl": 2,
  "n_antenna_ul": 1,
  "rf_mode": "tdd",
  "plmn": "00101",
  "disable_sdr": false,
  "power_on": true
} %}

{%- for k,v in ors_defaults|dictsort %}
{%-   do slapparameter_dict.setdefault(k, v) %}
{%- endfor %}

{%- set ishared_list = slap_configuration.setdefault('slave-instance-list', [])  %}
{%- for ishared in ishared_list %}
{%-   set _ = json_module.loads(ishared['_']) %}
{%-   if 'imsi' in _ %}
{%-     do _.update({'ue_type': 'lte'}) %}
{%-   endif %}
{%- endfor  %}

# code of generic ue
{%  include 'instance-ue-base.jinja2.cfg' %}

# let all templates know we are running in ORS mode
[config-base]
context -=
   json ors false
context +=
   key ors :ors
   raw ue_ifup {{ ue_ifup }}
ors = {{ dumps(slapparameter_dict) }}

# add ORS-specific bits to published information
[publish-connection-information]
ors-hardware.version = {{ out_params.ors_version }}
ors-hardware.frequency-range-rating = {{ out_params.cell1.range }}
ors-power.tx-power                  = {{ out_params.cell1.tx_power }}
ors-power.rx-gain                   = {{ slapparameter_dict.cell1.rx_gain }}
