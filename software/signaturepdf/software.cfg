[buildout]
extends =
  buildout.hash.cfg
  ../..//component/java-jdk/buildout.cfg
  ../../component/librsvg/buildout.cfg
  ../../component/ghostscript/buildout.cfg
  ../../component/potrace/buildout.cfg
  ../../component/gnupg/buildout.cfg
  ../../component/imagemagick/buildout.cfg
  ../../component/poppler/buildout.cfg
  ../../stack/lamp/buildout.cfg

[signature-download]
recipe = slapos.recipe.build:download
url = ${:_profile_base_location_}/${:filename}

[pdftk]
recipe = slapos.recipe.build:download
url = https://gitlab.com/pdftk-java/pdftk/-/jobs/924565145/artifacts/raw/build/libs/pdftk-all.jar
md5sum = 53b2991d7714c8dc82b61a5178be3a89
filename = pdftk.jar

[application]
url = https://github.com/24eme/signaturepdf/archive/refs/tags/v1.7.2.tar.gz
md5sum = a124b0249713274426bd4cbdae6b6e8c

[template-nextcloud-install.sh]
<= nc-download

[template-nextcloud-config.json]
<= nc-download

[template-signaturepdf-instance]
recipe = slapos.recipe.template:jinja2
url = ${:_profile_base_location_}/${:filename}
output = ${buildout:directory}/instance-signaturepdf.cfg
extensions = jinja2.ext.do
context =
          key gzip_location          gzip:location
          key php_location           apache-php:location
          key ghostscript_location   ghostscript:location
          key potrace_location       potrace:location
          key poppler_location       poppler:location
          key libnss3_location       nss:location
          key imagemagick_location   imagemagick:location
          key java_jdk_location      java-jdk:location
          key librsvg_location       librsvg:location
          raw pdftk_bin              ${pdftk:location}/${pdftk:filename}
#          raw gpg_bin_location       ${   gnupg:location}/bin

[custom-application-deployment]
path = ${template-signaturepdf-instance:output}
part-list = signaturepdf-install.sh
db-name = signature-pdf
db-user = signaturepdf

[nc-download-unpacked]
recipe = slapos.recipe.build:download-unpacked

[news-updater]
<= nc-download-unpacked
url = https://github.com/nextcloud/news-updater/archive/11.0.0.tar.gz
md5sum = 1e75222638cab49d3f66b7c76394f104


[versions]
gyp-next = 0.17.0
