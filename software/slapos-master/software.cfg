[buildout]
extends =
  ../../software/wendelin/software.cfg
  buildout.hash.cfg

[erp5-defaults]
wcfs-enable-default = true

[local-bt5-repository]
# Same as bt5-repository, but only local repository.
# Used to generate bt5lists.
list += ${vifib:location}/master/bt5

[default-bt5]
list =
  erp5_full_text_mroonga_catalog
  slapos_configurator

[erp5_repository_list]
repository_id_list += vifib/master

[erp5]
branch = erp5-vifib

[vifib]
<= erp5
repository = https://lab.nexedi.com/nexedi/slapos.core.git
branch = master

[slapos-bin]
<= erp5
repository = https://lab.nexedi.com/nexedi/slapos-bin.git
branch = master

[eggs]
eggs +=
  slapos.core

dummy +=
  ${vifib:location}
  ${slapos-bin:location}

extra-paths +=
  ${vifib:location}/master
  ${slapos-bin:location}


### Overwrite recipes to introduce customized changes
[download-base-part]
recipe = slapos.recipe.build:download
url = ${:_profile_base_location_}/${:filename}

[template-erp5]
< = download-base-part
filename = instance-erp5.cfg.in

[template-balancer]
< = download-base-part
filename = instance-balancer.cfg.in

[template-apache-backend-conf]
url = ${:_profile_base_location_}/${:filename}

[template-haproxy-cfg]
url = ${:_profile_base_location_}/${:filename}


# Test Suite: SlapOS-Master.UnitTest-Master ran at 2024/10/25 19:43:4.681477 UTC
#             0 failures, 0 errors, 1434 total, status: PASS

[erp5]
revision = 132d63e2cd5f98635e34a49591e479fecf87b1d0


[vifib]
revision = ef6a6622d58be635523925dc667cee9406f9a4c9


[erp5-bin]
revision = 073f7f6498d0bd5e45ed3c3beaa21cfdb34244ea


[slapos-bin]
revision = 0e69f462bf6de44db7d9a2bf0bf5407aa9691753


[erp5-doc]
revision = 3996ae1f832ca438ead9fbcf0ab8082dd1d22021


[wendelin]
revision = 7d423e92a0d0a4338facf4e6392775d3ebf3d402

