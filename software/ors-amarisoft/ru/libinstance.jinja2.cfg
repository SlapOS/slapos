{#- XXX need to be already loaded {%- import 'amari_slap.jinja2'  as lte     with context %}  #}

{#- icell_kind=enb|ue should be set from outside #}
{%- set iru_dict   = {}                                              %}
{%- set icell_dict = {}                                              %}
{%- do slaplte.load_iru_and_icell(iru_dict, icell_dict, icell_kind)  %}


{# XXX test promises #}
{%- macro buildout()	%}
{%-   for ru_ref, iru in iru_dict|dictsort %}
{%-     set ru = iru['_']  %}
# {{ ru_ref }} {{ ru.n_antenna_dl }}T{{ ru.n_antenna_ul }}R   XXX + ru arg
[ru-{{ru_ref}}-XXX]
<= macro.promise
promise = check_sdr_busy
config-testing = {{ slapparameter_dict.get("testing", False) }}
config-sdr = {{ sdr }}
{%-   endfor %}
{%- endmacro  %}
