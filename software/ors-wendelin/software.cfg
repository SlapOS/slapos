[buildout]
extends =
  buildout.hash.cfg
  ../../software/wendelin/software.cfg

parts +=
  ors-wendelin
  template-extend

[eggs]
eggs +=
  websocket-client
  ${xlte:egg}
extra-paths +=
  ${ors-wendelin:location}

[xlte-repository]
recipe = slapos.recipe.build:gitclone
repository = https://lab.nexedi.com/kirr/xlte.git
branch = py2
git-executable = ${git:location}/bin/git

[xlte]
recipe = zc.recipe.egg:develop
setup = ${xlte-repository:location}
egg = xlte
depends =
  ${numpy:egg}
  ${pygolang:egg}
  websocket-client

[wendelin]
recipe = slapos.recipe.build:gitclone
git-executable = ${git:location}/bin/git
repository = https://lab.nexedi.com/paul.graydon/wendelin.git
branch = ors_wendelin
revision =

[ors-wendelin]
<= erp5
repository = https://lab.nexedi.com/paul.graydon/ors-wendelin.git
branch = master
revision =

[local-bt5-repository]
list += ${ors-wendelin:location}/bt5

[erp5_repository_list]
repository_id_list += ors-wendelin

[default-bt5]
list =
  erp5_full_text_mroonga_catalog
  ors_configurator

[template]
output = ${buildout:directory}/template-base.cfg

[template-extend]
recipe = slapos.recipe.template:jinja2
url = ${:_profile_base_location_}/${:filename}
output = ${buildout:directory}/instance.cfg
extensions = jinja2.ext.do
context =
  section buildout buildout
  key template_base template:output
  key template_ors_wendelin template-ors-wendelin:target

[download-base-extend]
recipe = slapos.recipe.build:download
url = ${:_profile_base_location_}/${:filename}

[template-ors-wendelin]
<= download-base-extend

[versions]
websocket-client = 0.59.0
backports.ssl-match-hostname = 3.7.0.1
