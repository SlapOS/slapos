[buildout]
extends =
# basic needs
  ../../stack/slapos.cfg

parts +=
# use stack/slapos.cfg
  slapos-cookbook
  template-instance

# 2017-06-28: XXX is this really necessary? Remove after successful build
#add eggs needed by the instance
#find-links += 
#  https://pypi.python.org/packages/source/s/slapos.recipe.build/slapos.recipe.build-0.21.tar.gz
#  https://pypi.python.org/packages/source/p/plone.recipe.command/plone.recipe.command-1.1.zip

versions = versions

[versions]
slapos.recipe.template = 2.9

[template-instance]
# create the instance.cfg file in the buildout directory
# (use jinja for templating)
recipe = slapos.recipe.template:jinja2
template = ${:_profile_base_location_}/instance.cfg
rendered = ${buildout:directory}/instance.cfg
mode = 0644
md5sum = 085560ea84a5a7f633de0ef63a6ba7aa
scripts_dir = ${:_profile_base_location_}/scripts
logo_dir = ${:_profile_base_location_}/logo
curl_path = ${curl:location}/bin
git_path = ${git:location}/bin
context =
  key scripts_dir             :scripts_dir
  key logo_dir                :logo_dir
  key curl_path               :curl_path
  key git_path                :git_path
  key eggs_directory          buildout:eggs-directory
  key develop_eggs_directory  buildout:develop-eggs-directory
