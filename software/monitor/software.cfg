[buildout]

extends =
  buildout.hash.cfg
  ../../component/pycurl/buildout.cfg
  ../../component/python-cryptography/buildout.cfg
  ../../stack/monitor/buildout.cfg
  ../../stack/slapos.cfg
  ../../component/python3/buildout.cfg
  ../../component/pandas/buildout.cfg
  ../../component/scipy/buildout.cfg
  ../../component/statsmodels/buildout.cfg
  ../../component/defaults.cfg

parts =
  slapos-cookbook
  network-bench-cfg
  json-test-template
  template
  template-monitor

[template]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/${:filename}
output = ${buildout:directory}/template.cfg

[template-monitor]
recipe = slapos.recipe.build:download
url = ${:_profile_base_location_}/${:_update_hash_filename_}

[template-monitor-edgetest-basic]
recipe = slapos.recipe.build:download
url = ${:_profile_base_location_}/${:_update_hash_filename_}

[template-surykatka-ini]
recipe = slapos.recipe.build:download
url = ${:_profile_base_location_}/${:_update_hash_filename_}

[template-node-monitoring]
recipe = slapos.recipe.build:download
url = ${:_profile_base_location_}/${:_update_hash_filename_}

[json-test-template]
recipe = slapos.recipe.build:download
url = ${:_profile_base_location_}/${:_update_hash_filename_}

[network-bench-cfg]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/${:filename}
output = ${buildout:parts-directory}/${:_buildout_section_name_}

[monitor-collect-csv-dump]
recipe = slapos.recipe.build:download
url = ${:_profile_base_location_}/${:filename}

[surykatka]
recipe = zc.recipe.egg
script-name = ${:_buildout_section_name_}

[monitor-eggs]
recipe = zc.recipe.egg
eggs +=
  slapos.cookbook
  slapos.recipe.cmmi
  plone.recipe.command
scripts =

[versions]

surykatka = 0.8.0

# For surykatka 0.7.1
click = 8.0.1
dnspython = 2.1.0
forcediphttpsadapter = 1.0.1
miniupnpc = 2.0.2
peewee = 3.14.4
python-whois = 0.7.3
future = 0.18.2

# For node-monitoring
statsmodels = 0.11.1
patsy = 0.5.1

# Build GCC with Fortran for OpenBLAS (scipy & numpy)
[gcc]
max_version = 0

# Part below shall be removed after new promises are
# merged into slapos.toolbox master

# >>>>>>>>>>>>
[slapos.toolbox-repository]
recipe = slapos.recipe.build:gitclone
# Change this url once merge to nexedi/slapos.toolbox
repository = https://lab.nexedi.com/Just1/slapos.toolbox
branch = json-promise
git-executable = ${git:location}/bin/git

[slapos-toolbox-dependencies]
eggs +=
  ${pandas:egg}
  ${statsmodels:egg}
  ${scipy:egg}

[slapos-toolbox-dev]
<= slapos-toolbox
recipe = zc.recipe.egg:develop
setup = ${slapos.toolbox-repository:location}

[slapos-toolbox]
prerequisite = ${slapos-toolbox-dev:recipe}
eggs = slapos.toolbox

[versions]
slapos.toolbox =
# <<<<<<<<<<<<
