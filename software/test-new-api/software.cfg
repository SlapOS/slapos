[buildout]
extends =
  buildout.hash.cfg
  ../../stack/slapos-dev.cfg

parts =
  slapos-cookbook-develop
  slapos.core-dev
  slapos-cookbook
  template-cfg

[slapos.cookbook-repository]
develop = true

[template-cfg]
recipe = slapos.recipe.template:jinja2
rendered = ${buildout:directory}/template.cfg
template = ${:_profile_base_location_}/${:filename}
filename = instance.cfg.in
mode = 0644
context =
  section buildout buildout
  key template_instance_replicate template_instance_replicate:target
  key template_basic template_basic:target

[download-base]
recipe = slapos.recipe.build:download
url = ${:_profile_base_location_}/${:_update_hash_filename_}

[template_basic]
<= download-base

[template_instance_replicate]
<= download-base

[slapos.cookbook-repository]
repository = https://lab.nexedi.com/cedric.leninivin/slapos.git
branch = wipapi

[slapos.core-repository]
branch = json-api-slapgrid
