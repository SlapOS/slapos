[buildout]
extends =
# Python components
  ../../component/pandas/buildout.cfg
  ../../component/scipy/buildout.cfg
  ../../component/statsmodels/buildout.cfg
# Generics
  ../../component/defaults.cfg
  ../../stack/monitor/buildout.cfg
  ../../stack/slapos.cfg

  ./buildout.hash.cfg

parts =
  slapos-cookbook
  template

# >>>>>>>>>>>>
[slapos.toolbox-repository]
recipe = slapos.recipe.build:gitclone
# Change this url once merge to nexedi/slapos.toolbox
repository = https://lab.nexedi.com/Just1/slapos.toolbox
branch = json-promise
git-executable = ${git:location}/bin/git

[slapos-toolbox-dependencies]
eggs +=
  ${pandas:egg}
  ${statsmodels:egg}
  ${scipy:egg}

[slapos-toolbox-dev]
<= slapos-toolbox
recipe = zc.recipe.egg:develop
setup = ${slapos.toolbox-repository:location}

[slapos-toolbox]
prerequisite = ${slapos-toolbox-dev:recipe}
eggs = slapos.toolbox

[versions]
slapos.toolbox =
# <<<<<<<<<<<<

# Build GCC with Fortran for OpenBLAS (scipy & numpy)
[gcc]
max_version = 0

[template]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/${:filename}
output = ${buildout:directory}/template.cfg
# requires = ${slapos-toolbox:recipe}

[download-base]
recipe = slapos.recipe.build:download
url = ${:_profile_base_location_}/${:_update_hash_filename_}

[template-node-monitoring]
<= download-base

[versions]
statsmodels = 0.11.1
patsy = 0.5.1
