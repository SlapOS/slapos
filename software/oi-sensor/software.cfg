[buildout]
allow-picked-versions = true

extends =
  buildout.hash.cfg
  ../../stack/monitor/buildout.cfg
  ../../stack/slapos.cfg
  ../../component/python3/buildout.cfg
  ../../component/git/buildout.cfg

parts = 
  interpreter
  slapos-cookbook
  osie-repository
  instance-profile

[interpreter]
recipe = zc.recipe.egg:scripts
interpreter = py
eggs =
  asyncua
  opencv-python
  pyopenssl
  numpy

[osie-repository]
recipe  = slapos.recipe.build:gitclone
git-executable = ${git:location}/bin/git
repository = https://lab.nexedi.com/nexedi/osie.git
revision = 9cd47af7fffef252496682b2376d5a4205610127

[versions]
cryptography = 42.0.8:whl
PyYAML = 6.0.1
aiosqlite = 0.20.0
aiofiles = 24.1.0
pyOpenSSL = 24.1.0

[instance-profile]
recipe = slapos.recipe.template:jinja2
template = ${:_profile_base_location_}/instance.cfg.in
rendered = ${buildout:directory}/instance.cfg
context =
  section buildout buildout
  key interpreter_location buildout:bin-directory
  key osie_repository_location osie-repository:location
