[buildout]
extends =
  buildout.hash.cfg
  ../../software/wendelin/software.cfg

parts +=
  wendelin-telecom
  template-extend

[eggs]
eggs +=
  websocket-client
  ${xlte:egg}
extra-paths +=
  ${wendelin-telecom:location}

[xlte-repository]
recipe = slapos.recipe.build:gitclone
repository = https://lab.nexedi.com/kirr/xlte.git
branch = py2
git-executable = ${git:location}/bin/git
revision = 58df27260dfd7c23ebd86505be4e5a5c44e12871

[xlte]
recipe = zc.recipe.egg:develop
setup = ${xlte-repository:location}
egg = xlte
depends =
  ${numpy:egg}
  ${pygolang:egg}
  websocket-client

[wendelin-telecom]
<= erp5
repository = https://lab.nexedi.com/paul.graydon/wendelin-telecom.git
branch = master
revision = 71d02c8d6cce7e9970b1371d149622f201440fda

[local-bt5-repository]
list += ${wendelin-telecom:location}/bt5

[erp5_repository_list]
repository_id_list += wendelin-telecom

[template]
output = ${buildout:directory}/template-base.cfg

[template-extend]
recipe = slapos.recipe.template:jinja2
url = ${:_profile_base_location_}/${:filename}
output = ${buildout:directory}/instance.cfg
extensions = jinja2.ext.do
context =
  section buildout buildout
  key template_base template:output
  key template_wendelin_telecom template-wendelin-telecom:target

[download-base-extend]
recipe = slapos.recipe.build:download
url = ${:_profile_base_location_}/${:filename}

[template-wendelin-telecom]
<= download-base-extend

[versions]
websocket-client = 0.59.0
backports.ssl-match-hostname = 3.7.0.1
