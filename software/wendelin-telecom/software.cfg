[buildout]
extends =
  buildout.hash.cfg
  ../../software/wendelin/software-py3.cfg

parts +=
  template-extend

[eggs]
eggs +=
  websocket-client
  nrarfcn
  ${xlte:egg}

[xlte-repository]
recipe = slapos.recipe.build:gitclone
repository = https://lab.nexedi.com/kirr/xlte.git
revision = 31ede5ca
git-executable = ${git:location}/bin/git

[xlte]
recipe = zc.recipe.egg:develop
setup = ${xlte-repository:location}
egg = xlte
depends =
  ${numpy:egg}
  ${pygolang:egg}
  websocket-client
  nrarfcn

[default-bt5]
list =
  erp5_full_text_mroonga_catalog
  erp5_wendelin_telecom_configurator

[template]
output = ${buildout:directory}/template-base.cfg

[template-extend]
recipe = slapos.recipe.template:jinja2
url = ${:_profile_base_location_}/${:filename}
output = ${buildout:directory}/instance.cfg
extensions = jinja2.ext.do
context =
  section buildout buildout
  key template_base template:output
  key template_wendelin_telecom template-wendelin-telecom:target

[download-base-extend]
recipe = slapos.recipe.build:download
url = ${:_profile_base_location_}/${:filename}

[template-wendelin-telecom]
<= download-base-extend

[versions]
nrarfcn = 2.4.0:whl
