[buildout]
extends =
  ../../stack/slapos.cfg
  ../../component/git/buildout.cfg
  ../../component/lxml-python/buildout.cfg
  ../../component/zip/buildout.cfg
  ../../component/busybox/buildout.cfg
  ../../component/shellinabox/buildout.cfg
  ../../component/pwgen/buildout.cfg
  ../../component/apache/buildout.cfg

parts =
  slapos-cookbook-develop
  slapos-core-develop
  erp5-util-develop
  slapos-cookbook
  template
  lxml-python
  eggs
  zip
  git
  apache

[erp5-util-repository.git]
recipe = slapos.recipe.build:gitclone
repository = http://git.erp5.org/repos/erp5.git
branch = dream_distributor
git-executable = ${git:location}/bin/git
develop = true

[erp5-util-develop]
recipe = zc.recipe.egg:develop
setup = ${erp5-util-repository.git:location}

[slapos.cookbook-repository]
branch = dream

[slapos.core-repository]
recipe = slapos.recipe.build:gitclone
repository = http://git.erp5.org/repos/slapos.core.git
branch = master
git-executable = ${git:location}/bin/git
develop = true

[slapos-core-develop]
recipe = zc.recipe.egg:develop
setup = ${slapos.core-repository:location}

[eggs]
recipe = zc.recipe.egg
eggs =
  ${lxml-python:egg}
  zc.buildout
  slapos.libnetworkcache
  slapos.core
  jsonschema
  hexagonit.recipe.download
  netaddr
  inotifyx
  lock_file
  pytz
  erp5.util
  PyXML

[testnode]

scripts =
  testnode = erp5.util.testnode:main
  slapgrid-cp = slapos.grid.slapgrid:runComputerPartition
  slapgrid-sr = slapos.grid.slapgrid:runSoftwareRelease
  slapproxy = slapos.proxy:main


[template]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/instance.cfg
output = ${buildout:directory}/template.cfg
mode = 0644
md5sum = 307663d73ef3ef94b02567ecd322252e

[template-default]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/instance-default.cfg
output = ${buildout:directory}/template-default.cfg
mode = 0644
md5sum = 22ffc8e212dcf2db8ad94cf0e5ac4772

[versions]
erp5.util =
slapos.cookbook =
PyXML = 0.8.5
erp5.util =
slapos.recipe.template = 2.7
