[buildout]
extends =
  buildout.hash.cfg
  ../../stack/slapos.cfg
  ../../component/git/buildout.cfg
  ../../component/lxml-python/buildout.cfg
  ../../component/zip/buildout.cfg
  ../../component/bash/buildout.cfg
  ../../component/caddy/buildout.cfg
  ../../component/coreutils/buildout.cfg
  ../../component/shellinabox/buildout.cfg
  ../../component/pwgen/buildout.cfg
  ../../component/apache/buildout.cfg
  ../../stack/monitor/buildout.cfg

parts =
  slapos-cookbook-develop
  erp5.util-develop
  slapos-cookbook
  template
  lxml-python
  eggs
  zip
  git
  apache


[erp5.util-develop]
recipe = zc.recipe.egg:develop
setup = ${erp5.util-repository:location}

[erp5.util-repository]
recipe = slapos.recipe.build:gitclone
repository = https://lab.nexedi.com/jerome/erp5.git
branch = feat/testnode_shared_part
git-executable = ${git:location}/bin/git

[slapos.cookbook-repository]
repository = https://lab.nexedi.com/jerome/slapos.git
branch = feat/testnode_shared_part

[eggs]
recipe = zc.recipe.egg
eggs =
  ${lxml-python:egg}
  zc.buildout
  slapos.libnetworkcache
  slapos.core
  slapos.recipe.template
  supervisor
  jsonschema
  hexagonit.recipe.download
  lock_file
  pytz
  erp5.util
  PyXML
  z3c.etestbrowser

[testnode]

scripts =
  testnode = erp5.util.testnode:main
  slapgrid-cp = slapos.grid.slapgrid:runComputerPartition
  slapgrid-sr = slapos.grid.slapgrid:runSoftwareRelease
  slapproxy = slapos.proxy:main


[template]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/instance.cfg
output = ${buildout:directory}/template.cfg
mode = 0644

[template-default]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/instance-default.cfg
output = ${buildout:directory}/template-default.cfg
mode = 0644

[versions]
erp5.util =
slapos.cookbook =
slapos.recipe.template = 4.3
dnspython = 1.15.0
PyXML = 0.8.5
WebOb = 1.8.5
WebTest = 2.0.33
backports.functools-lru-cache = 1.5
soupsieve = 1.8
#gitdb2 = 2.0.4
#smmap2 = 2.0.4
waitress = 1.2.1
z3c.etestbrowser = 2.0.1
zope.testbrowser = 5.3.2

# Required by:
# zope.testbrowser==5.3.2
WSGIProxy2 = 0.4.6

# Required by:
# WebTest==2.0.33
beautifulsoup4 = 4.7.1

# Required by:
# zope.testbrowser==5.3.2
zope.cachedescriptors = 4.3.1

# Required by:
# zope.schema==4.9.3
zope.event = 4.4

# Required by:
# zope.testbrowser==5.3.2
zope.schema = 4.9.3
