[buildout]

extends =
  ../../component/postgresql/buildout.cfg
  ../../component/psycopg2/buildout.cfg
  ../../component/erlang/buildout.cfg
  ../../component/openssl/buildout.cfg
  ../../component/nginx/buildout.cfg
  ../../stack/monitor/buildout.cfg
  buildout.hash.cfg

show-picked-versions = true
allow-picked-versions = true

parts =
  slapos-cookbook
  postgresql
  eggs
  instance


[rabbitmq]
recipe= slapos.recipe.build:download-unpacked
url = https://github.com/rabbitmq/rabbitmq-server/releases/download/v3.12.5/rabbitmq-server-generic-unix-3.12.5.tar.xz
md5sum = 6ba62866f5238504d93deed57b4bf7ed


[psycopg2-binary]
<= psycopg2
egg = psycopg2-binary

[eggs]
recipe = zc.recipe.egg
interpreter = python_eggs
eggs =
  celery
  gunicorn
  Django
  django-celery-beat
  django-cursor-pagination
  django-datetime-widget
  django-debug-toolbar
  django-extensions
  django-rest-swagger
  django-timezone-field
  django-filter
  django-cors-headers
  djangorestframework-simplejwt
  django-health-check
  psutil
  django-organizations
  django-annoying
  ${django-dbconn-retry-setup:egg}
  ${django-reset-migrations-setup:egg}
  django-celery-results
  djangorestframework-datatables
  meld3
  more-itertools
  netaddr
  openapi-codec
  ${psycopg2-binary:egg}
  python-crontab
  python-dateutil
  python-magic
  python-memcached
  ${thehive4py-setup:egg}
  tornado
  tzlocal
  Werkzeug
  zipp
  cpe
scripts =
  gunicorn
  celery

[gitclone]
recipe  = slapos.recipe.build:gitclone
git-executable = ${git:location}/bin/git

[patrowl]
<= gitclone
repository = https://github.com/Patrowl/PatrowlManager.git
git-executable = ${git:location}/bin/git

[django-dbconn-retry]
<= gitclone
repository = https://github.com/jdelic/django-dbconn-retry.git

[django-reset-migrations]
<= gitclone
repository = https://github.com/valdergallo/django-reset-migrations.git

[thehive4py]
<= gitclone
repository = https://github.com/TheHive-Project/Thehive4py.git
revision = 1.8.1

[django-dbconn-retry-setup]
recipe  = zc.recipe.egg:develop
egg = django-dbconn-retry
setup = ${django-dbconn-retry:location}

[django-reset-migrations-setup]
recipe  = zc.recipe.egg:develop
egg = django-reset-migrations
setup = ${django-reset-migrations:location}

[thehive4py-setup]
recipe  = zc.recipe.egg:develop
egg = thehive4py
setup = ${thehive4py:location}

[download-template]
recipe = slapos.recipe.build:download
url = ${:_profile_base_location_}/${:filename}

[instance]
recipe = slapos.recipe.template:jinja2
output = ${buildout:directory}/instance.cfg
url = ${:_profile_base_location_}/${:filename}
context =
    key bin_directory buildout:bin-directory
    key buildout_egg_directory buildout:eggs-directory
    key buildout_develop_directory buildout:develop-eggs-directory
    key buildout_directory buildout:directory
    key template_monitor_cfg monitor2-template:output
    key logrotate_cfg template-logrotate-base:output
    key erlang_location erlang:location
    key openssl_location openssl:location
    key patrowl_location patrowl:location
    key postgresql_location postgresql:location
    key nginx_bin nginx-output:nginx
    key nginx_mime_types nginx-output:mime
    key python_with_eggs eggs:interpreter
    key rabbitmq_location rabbitmq:location
    key template_create_admin template-create_default_admin.py.in:target
    key template_patrowl template-patrowl:target
    key template_patrowl_wrapper template-patrowl-wrapper:target
    key template_nginx_conf template-nginx.conf.in:target

[template-patrowl]
<= download-template
output = ${buildout:directory}/instance-patrowl.cfg.jinja2

[template-patrowl-wrapper]
<= download-template
output = ${buildout:directory}/patrowl-wapper.sh.in

[template-create_default_admin.py.in]
<= download-template
output = ${buildout:directory}/create_default_admin.py.in

[template-nginx.conf.in]
<= download-template
output = ${buildout:directory}/nginx.conf.in

[versions]
amqp = 2.5.2
Babel = 2.9.1
backports-abc = 0.5
billiard = 3.6.1.0
celery = 4.4.0
certifi = 2017.4.17
chardet = 3.0.4
coreapi = 2.3.3
coreschema = 0.0.4
Django = 2.2.26
#django-celery-beat = 1.1.1
django-celery-beat = 2.0.0
django-celery-results = 2.0.1
django-cursor-pagination = 0.1.4
django-datetime-widget = 0.9.3
django-debug-toolbar = 3.2.2
django-extensions = 2.1.9
django-rest-swagger = 2.2.0
django-timezone-field = 4.0
djangorestframework = 3.13.1
djangorestframework-datatables = 0.7.0
flower = 0.9.2
future = 0.16.0
futures = 3.1.1
gunicorn = 20.0.4
idna = 2.5
importlib-metadata = 0.23
itypes = 1.1.0
Jinja2 = 2.11.3
jsonfield = 2.0.2
kombu = 4.6.7
libmagic = 1.0
MarkupSafe = 1.1.0
meld3 = 1.0.2
more-itertools = 7.2.0
netaddr = 0.7.19
openapi-codec = 1.3.2
#psycopg2-binary = 2.8.6
psycopg2-binary = 2.8.6
python-crontab = 2.3.6
python-dateutil = 2.8.0
python-magic = 0.4.15
#python-magic-bin = 0.4.14
python-memcached = 1.59
pytz = 2019.2
requests = 2.25.1
simplejson = 3.16.0
singledispatch = 3.4.0.3
six = 1.10.0
sqlparse = 0.4.2
thehive4py = 1.8.1
#thehive4py = 1.5.1
PyJWT = 2.8.0
tornado = 5.1
tzlocal = 1.5.1
uritemplate = 3.0.0
urllib3 = 1.26.5
vine = 1.3.0
Werkzeug = 2.0.1
zipp = 0.6.0
django-filter = 2.4.0
django-cors-headers = 3.2.0
djangorestframework-simplejwt = 4.4.0
django-health-check = 3.12.1
psutil = 5.7.0
django-organizations = 1.1.2
django-annoying = 0.10.6
#django-reset-migrations
#django-dbconn-retry
cpe = 1.2.1
django-dbconn-retry = 0.1.7
django-reset-migrations = 0.4.0

