[buildout]
extends = {{ instance_common_cfg }}

[jinja2-template-base]
rendered = ${buildout:parts-directory}/${:_buildout_section_name_}.cfg

[neo-cluster]
<= jinja2-template-base
template = {{ neo_cluster }}
extra-context =
    import urlparse urlparse
import-list =
    rawfile root_common {{ root_common }}

[simcard-cluster]
<= jinja2-template-base
template = {{ cluster }}
extra-context =
    import urlparse urlparse
    raw instance_slave_db_json {{ instance_slave_db_json }} 
    raw store_py_in {{ store_py_in }}
    key neo_cluster neo-cluster:rendered

[neo-storage-sqlite] 
<= jinja2-template-base 
template = {{ neo_storage_sqlite }} 
extra-context =
    key master_cfg neo-master:rendered
    key admin_cfg neo-admin:rendered

[switch-softwaretype]
recipe = slapos.cookbook:switch-softwaretype
override = {{ dumps(override_switch_softwaretype |default) }}
default = simcard-cluster:rendered
# BBB
RootSoftwareInstance = ${:default}
neo = neo-storage-sqlite:rendered
