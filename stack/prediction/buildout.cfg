[buildout]

extends =
  ../../component/pandas/buildout.cfg
  ../../component/statsmodels/buildout.cfg
  ../../component/scipy/buildout.cfg
  ../../stack/monitor/buildout.cfg

parts +=
  prediction-template
  slapos-toolbox

[gcc]
# Always build GCC for Fortran (see openblas).
max_version = 0

# use slapos.toolbox develop
[slapos.toolbox-repository]
recipe = slapos.recipe.build:gitclone
repository = https://lab.nexedi.com/lisa.casino/slapos.toolbox.git
branch = new_check_free_disk_space
git-executable = ${git:location}/bin/git
develop = true

[slapos.toolbox-dev]
recipe = zc.recipe.egg:develop
egg = slapos.toolbox
setup = ${slapos.toolbox-repository:location}
depends = ${slapos-toolbox-dependencies:eggs}

[slapos-toolbox]
eggs = ${slapos.toolbox-dev:egg}

[slapos-toolbox-dependencies]
eggs =
  ${lxml-python:egg}
  ${pycurl:egg}
  ${python-cryptography:egg}
  ${backports.lzma:egg}
  ${pandas:egg}
  ${statsmodels:egg}
  ${scipy:egg}

[prediction-template]
recipe = slapos.recipe.template:jinja2
filename = template-prediction.cfg
template = ${:_profile_base_location_}/instance-prediction.cfg.jinja2.in
rendered = ${buildout:directory}/template-prediction.cfg
context =
    key template_monitor_base monitor-template:rendered

[versions]
scipy = 1.0.1
statsmodels = 0.8.0
patsy = 0.4.1
pandas = 0.19.2
slapos.toolbox =
